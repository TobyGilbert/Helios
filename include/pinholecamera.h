#ifndef PINHOLECAMERA_H
#define PINHOLECAMERA_H

#include<optixu/optixpp_namespace.h>
#define M_PI 3.14159265359

class PinholeCamera
{
public:
    typedef optix::float3 float3;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our default contructor that does all our calculations
    /// @param _eye - the eye of our pinhole camera
    /// @param _lookat - the direction that our camera is facing
    /// @param _up - which direction up is
    /// @param _hfov - the horizontal field of view of our camera
    /// @param _vfov - the virtical field of view of our camera
    //----------------------------------------------------------------------------------------------------------------------
    PinholeCamera(float3 _eye, float3 _lookat, float3 _up, float _hfov, float _vfov);
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief a mutator for our paramters
    //----------------------------------------------------------------------------------------------------------------------
    void setParameters(float3 _eye, float3 _lookat, float3 _up, float _hfov, float _vfov);
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief a function to return
    //----------------------------------------------------------------------------------------------------------------------
    void getEyeUVW(float3 &_eye, float3 &_U, float3 &_V, float3 &_W);
    //----------------------------------------------------------------------------------------------------------------------
protected:
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief basic constructor, we dont want this to be used.
    //----------------------------------------------------------------------------------------------------------------------
    PinholeCamera();
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief calculates our Eye U V W vectors
    //----------------------------------------------------------------------------------------------------------------------
    void calcVectors(float3 _eye, float3 _lookat, float3 _up, float _hfov, float _vfov);
    //----------------------------------------------------------------------------------------------------------------------
private:
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief convertion from degrees to radians
    //----------------------------------------------------------------------------------------------------------------------
    inline float DtoR(float d){return d*(static_cast<float>(M_PI)/180.f);}
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our eye location
    //----------------------------------------------------------------------------------------------------------------------
    float3 m_eye;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our U vector of our camera
    //----------------------------------------------------------------------------------------------------------------------
    float3 m_U;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our V vector of our camera
    //----------------------------------------------------------------------------------------------------------------------
    float3 m_V;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our W vector of our camera
    //----------------------------------------------------------------------------------------------------------------------
    float3 m_W;
    //----------------------------------------------------------------------------------------------------------------------

};

#endif // PINHOLECAMERA_H
