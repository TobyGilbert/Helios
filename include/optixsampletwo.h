#ifndef OPTIXSAMPLETWO_H
#define OPTIXSAMPLETWO_H

#include <optixu/optixpp_namespace.h>
#include <QImage>

class OptixSampleTwo
{
public:
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our defalut constructor
    //----------------------------------------------------------------------------------------------------------------------
    OptixSampleTwo();
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our default destructor
    //----------------------------------------------------------------------------------------------------------------------
    ~OptixSampleTwo();
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief initialise our class
    //----------------------------------------------------------------------------------------------------------------------
    void init();
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our trace function that launches our Optix context
    //----------------------------------------------------------------------------------------------------------------------
    QImage trace();
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief a mutator to set the width and height of our scene
    //----------------------------------------------------------------------------------------------------------------------
    inline void setSize(unsigned int _width, unsigned int _height){m_width = _width; m_height = _height;}
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief set how many boxes we want to create
    //----------------------------------------------------------------------------------------------------------------------
    inline void setNumBoxes(int _numBoxes){m_numBoxes = _numBoxes;}
    //----------------------------------------------------------------------------------------------------------------------
protected:
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief An instance of the optix engine
    //----------------------------------------------------------------------------------------------------------------------
    optix::Context m_context;
    //----------------------------------------------------------------------------------------------------------------------
private:
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief a function to create our geomtry instances
    //----------------------------------------------------------------------------------------------------------------------
    void createGeometryInstances(optix::Geometry _box, optix::Material _material);
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief a function to create our geomtry
    //----------------------------------------------------------------------------------------------------------------------
    optix::Geometry createGeomtry();
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief a function to create our materials
    //----------------------------------------------------------------------------------------------------------------------
    optix::Material createMaterial();
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief out output buffer
    //----------------------------------------------------------------------------------------------------------------------
    optix::Buffer m_outputBuffer;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our lights buffer object
    //----------------------------------------------------------------------------------------------------------------------
    optix::Buffer m_light_buffer_obj;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief the width of our scene
    //----------------------------------------------------------------------------------------------------------------------
    unsigned int m_width;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief the height of our scene
    //----------------------------------------------------------------------------------------------------------------------
    unsigned int m_height;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief a member to set how many boxes to create
    //----------------------------------------------------------------------------------------------------------------------
    int m_numBoxes;
    //----------------------------------------------------------------------------------------------------------------------
};

#endif // OPTIXSAMPLETWO_H
